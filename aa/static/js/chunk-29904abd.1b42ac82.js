(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-29904abd"],{"16e3":function(t,e,a){"use strict";a.r(e);var n=a("61f7"),r=a("50fc"),s=a("dd68"),i={data:function(){return{sch_uid:"",roles:"",options:[{value:"1",label:"代理"},{value:"2",label:"码商"},{value:"3",label:"商户"}],tablePage:[],pageNo:1,pageSize:10,total:0,formData:{},editType:"",diaIsShow:!1,rowIndex:0,rules:{rate:[{required:!0,validator:n.b,minVal:0,trigger:"blur"}]}}},mounted:function(){this._getUserList({pageNo:this.pageNo})},methods:{_stateRoles:function(t,e){return Object(s.a)(t[e.property])},seachList:function(){this.pageNo=1;var t={pageNo:this.pageNo};this.sch_uid&&(t.uid=this.sch_uid),this.roles&&(t.roles=this.roles),this._getUserList(t)},_getUserList:function(t){var e=this;Object(r.i)(t).then(function(t){0==t.code?(e.tablePage=t.data.userList,e.total=t.data.totalCount):e.$message.error("获取列表失败")})},handlePage:function(t){this.pageNo=t;var e={pageNo:this.pageNo};this.sch_uid&&(e.uid=this.sch_uid),this.roles&&(e.roles=this.roles),this._getUserList(e)},_editUserInfo:function(t){var e=this;Object(r.e)(t).then(function(a){0===a.code?(e.$set(e.tablePage,e.rowIndex,Object.assign(e.tablePage[e.rowIndex],{rate:t.rate,username:t.username,nickname:t.nickname})),e.$notify({title:"成功",message:"信息修改成功",type:"success"})):e.$message.error("修改失败")})},_changeUserState:function(t,e,a){var n=this;Object(r.b)({uid:a,state:!e}).then(function(a){0===a.code?(n.tablePage[t].state=!e,n.$message.success("修改成功")):n.$message.error("修改失败,请稍后重试")})},editTable:function(t,e){var a=this;this.formData=Object.assign({},e),this.editType="update",this.diaIsShow=!0,this.$nextTick(function(){a.$refs.diaForm.clearValidate()}),this.rowIndex=t},changeTab:function(t){var e=this;this.$refs[t].validate(function(t){if(t){if("update"===e.editType){var a={uid:e.formData.uid,username:e.formData.username,nickname:e.formData.nickname,rate:e.formData.rate};e._editUserInfo(a)}e.diaIsShow=!1}})}}},o=(a("b69f"),a("2877")),l=Object(o.a)(i,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"className"},[a("el-card",{staticClass:"anoCard"},[a("div",{attrs:{slot:"header"},slot:"header"},[t._v("用户列表")]),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{clearable:"",type:"text",placeholder:"请输入客户UID"},model:{value:t.sch_uid,callback:function(e){t.sch_uid=e},expression:"sch_uid"}})],1),a("el-col",{attrs:{span:6}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择用户角色"},model:{value:t.roles,callback:function(e){t.roles=e},expression:"roles"}},t._l(t.options,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),a("el-col",{attrs:{span:6}},[a("el-button",{attrs:{type:"primary"},on:{click:t.seachList}},[t._v("搜索")])],1)],1),a("el-table",{staticStyle:{"margin-top":"30px"},attrs:{data:t.tablePage,stripe:"",border:""}},[a("el-table-column",{attrs:{prop:"uid",label:"用户UID",width:"120"}}),a("el-table-column",{attrs:{prop:"roles",label:"角色",formatter:t._stateRoles}}),a("el-table-column",{attrs:{prop:"nickname",label:"姓名"}}),a("el-table-column",{attrs:{prop:"username",label:"账户名称"}}),a("el-table-column",{attrs:{prop:"rate",label:"费率(‰)"}}),a("el-table-column",{attrs:{prop:"balance",label:"用户余额"}}),a("el-table-column",{attrs:{prop:"state",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-switch",{staticClass:"spc_disabled",attrs:{disabled:"","active-text":"启用","inactive-text":"禁用"},nativeOn:{click:function(a){return t._changeUserState(e.$index,e.row.state,e.row.uid)}},model:{value:e.row.state,callback:function(a){t.$set(e.row,"state",a)},expression:"scope.row.state"}})]}}])}),a("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(a){return t.editTable(e.$index,e.row)}}},[t._v("编辑")])]}}])})],1),a("el-pagination",{staticClass:"f-pagination",attrs:{background:"",layout:"total, prev, pager, next","page-size":t.pageSize,"current-page":t.pageNo,total:t.total},on:{"current-change":t.handlePage}})],1),a("el-dialog",{staticClass:"diaForm",attrs:{title:"信息修改",visible:t.diaIsShow},on:{"update:visible":function(e){t.diaIsShow=e}}},[a("el-form",{ref:"diaForm",staticClass:"dialog-wrapper",attrs:{model:t.formData,rules:t.rules,"label-width":"140px"}},[a("el-form-item",{attrs:{label:"姓名",prop:"nickname"}},[a("el-input",{attrs:{type:"text",disabled:!0},model:{value:t.formData.nickname,callback:function(e){t.$set(t.formData,"nickname",e)},expression:"formData.nickname"}})],1),a("el-form-item",{attrs:{label:"电话",prop:"username"}},[a("el-input",{attrs:{type:"text",disabled:!0},model:{value:t.formData.username,callback:function(e){t.$set(t.formData,"username",e)},expression:"formData.username"}})],1),a("el-form-item",{attrs:{label:"费率",prop:"rate"}},[a("el-input",{attrs:{type:"text"},model:{value:t.formData.rate,callback:function(e){t.$set(t.formData,"rate",e)},expression:"formData.rate"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.changeTab("diaForm")}}},[t._v("确认")]),a("el-button",{on:{click:function(e){t.diaIsShow=!1}}},[t._v("取消")])],1)],1)],1)],1)},[],!1,null,"667c6842",null);e.default=l.exports},"50fc":function(t,e,a){"use strict";a.d(e,"g",function(){return r}),a.d(e,"d",function(){return s}),a.d(e,"h",function(){return i}),a.d(e,"a",function(){return o}),a.d(e,"i",function(){return l}),a.d(e,"e",function(){return u}),a.d(e,"b",function(){return c}),a.d(e,"l",function(){return d}),a.d(e,"m",function(){return f}),a.d(e,"j",function(){return p}),a.d(e,"k",function(){return m}),a.d(e,"f",function(){return b}),a.d(e,"c",function(){return h});var n=a("365c");function r(){return n.a.post("/admin/getOwnInfo")}function s(t){return n.a.post("/admin/editUser",t)}function i(t){return n.a.post("/admin/getUserInfo",t)}function o(t){return n.a.post("/admin/addUser",t)}function l(t){return n.a.post("/admin/getUserList",t)}function u(t){return n.a.post("/admin/editUserInfo",t)}function c(t){return n.a.post("/admin/changeUserState",t)}function d(t){return n.a.post("/admin/settle",t)}function f(t){return n.a.post("/admin/settleRecordList",t)}function p(t){return n.a.post("/admin/renew",t)}function m(t){return n.a.post("/admin/renewRecordList",t)}function b(t){return n.a.post("/admin/getOrderList",t)}function h(t){return n.a.post("/dashboardToatal",t)}},"52b7":function(t,e,a){},b69f:function(t,e,a){"use strict";var n=a("52b7");a.n(n).a},dd68:function(t,e,a){"use strict";e.a=function(t){return 0==t||"0"==t?"总管理员":1==t?"代理":2==t?"码商":3==t?"商户":"身份异常"}}}]);