(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-0ca35709"],{a4d9:function(t,e,a){},c735:function(t,e,a){"use strict";a.r(e);var r=a("61f7"),n=a("f6b0"),o={data:function(){return{tablePage:[],pageNo:1,pageSize:10,total:0,formData:{},editType:"",diaIsShow:!1,rowIndex:0,rules:{rate:[{required:!0,validator:r.b,minVal:0,trigger:"blur"}]}}},mounted:function(){this._getCustomerList(1)},methods:{_getCustomerList:function(t){var e=this;Object(n.d)({pageNo:t}).then(function(t){0==t.code?(e.tablePage=t.data.userList,e.total=t.data.totalCount):e.$message.error("获取列表失败")})},handlePage:function(t){this.pageNo=t},_editCustomer:function(t){var e=this;Object(n.c)(t).then(function(a){0===a.code?(e.tablePage[e.rowIndex].rate=t.rate,e.$notify({title:"成功",message:"信息修改成功",type:"success"})):e.$message.error(a.message)})},_changeCustomerState:function(t,e,a){var r=this;Object(n.b)({uid:a,state:!e}).then(function(a){0===a.code?(r.tablePage[t].state=!e,r.$message.success("修改成功")):r.$message.error("修改失败,请稍后重试")})},editTable:function(t,e){var a=this;this.formData=Object.assign({},e),this.editType="update",this.diaIsShow=!0,this.$nextTick(function(){a.$refs.diaForm.clearValidate()}),this.rowIndex=t},changeTab:function(t){var e=this;this.$refs[t].validate(function(t){if(t){if("update"===e.editType){var a={uid:e.formData.uid,rate:e.formData.rate};e._editCustomer(a)}e.diaIsShow=!1}})}}},s=(a("c770"),a("2877")),i=Object(s.a)(o,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"className"},[a("el-card",{staticClass:"anoCard"},[a("div",{attrs:{slot:"header"},slot:"header"},[t._v("客户列表")]),a("el-table",{attrs:{data:t.tablePage,stripe:"",border:""}},[a("el-table-column",{attrs:{prop:"uid",label:"商户UID",width:"120"}}),a("el-table-column",{attrs:{prop:"nickname",label:"姓名"}}),a("el-table-column",{attrs:{prop:"username",label:"账户名称"}}),a("el-table-column",{attrs:{prop:"rate",label:"费率(‰)"}}),a("el-table-column",{attrs:{prop:"balance",label:"商户余额"}}),a("el-table-column",{attrs:{prop:"state",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-switch",{staticClass:"spc_disabled",attrs:{disabled:"","active-text":"启用","inactive-text":"禁用"},nativeOn:{click:function(a){return t._changeCustomerState(e.$index,e.row.state,e.row.uid)}},model:{value:e.row.state,callback:function(a){t.$set(e.row,"state",a)},expression:"scope.row.state"}})]}}])}),a("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(a){return t.editTable(e.$index,e.row)}}},[t._v("编辑")])]}}])})],1),a("el-pagination",{staticClass:"f-pagination",attrs:{background:"",layout:"total, prev, pager, next","page-size":t.pageSize,"current-page":t.pageNo,total:t.total},on:{"current-change":t.handlePage}})],1),a("el-dialog",{staticClass:"diaForm",attrs:{title:"信息修改",visible:t.diaIsShow},on:{"update:visible":function(e){t.diaIsShow=e}}},[a("el-form",{ref:"diaForm",staticClass:"dialog-wrapper",attrs:{model:t.formData,rules:t.rules,"label-width":"140px"}},[a("el-form-item",{attrs:{label:"姓名",prop:"nickname"}},[a("el-input",{attrs:{type:"text",disabled:!0},model:{value:t.formData.nickname,callback:function(e){t.$set(t.formData,"nickname",e)},expression:"formData.nickname"}})],1),a("el-form-item",{attrs:{label:"账户",prop:"username"}},[a("el-input",{attrs:{type:"text",disabled:!0},model:{value:t.formData.username,callback:function(e){t.$set(t.formData,"username",e)},expression:"formData.username"}})],1),a("el-form-item",{attrs:{label:"费率",prop:"rate"}},[a("el-input",{attrs:{type:"text"},model:{value:t.formData.rate,callback:function(e){t.$set(t.formData,"rate",e)},expression:"formData.rate"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.changeTab("diaForm")}}},[t._v("确认")]),a("el-button",{on:{click:function(e){t.diaIsShow=!1}}},[t._v("取消")])],1)],1)],1)],1)},[],!1,null,"2f8de2f1",null);e.default=i.exports},c770:function(t,e,a){"use strict";var r=a("a4d9");a.n(r).a},f6b0:function(t,e,a){"use strict";a.d(e,"a",function(){return n}),a.d(e,"d",function(){return o}),a.d(e,"c",function(){return s}),a.d(e,"b",function(){return i});var r=a("365c");function n(t){return r.a.post("/addCustomer",t)}function o(t){return r.a.get("/getCustomerList",t)}function s(t){return r.a.post("/editCustomer",t)}function i(t){return r.a.post("/changeCustomerState",t)}}}]);